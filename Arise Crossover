-- Load Kavo UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()

local Window = Library.CreateLib("Arise Crossover | Hub", "Ocean")

local AutoFarm = false
local SelectedMob = nil

-- Tab Farm
local FarmTab = Window:NewTab("Farm")
local FarmSection = FarmTab:NewSection("Farm Mobs")

-- Hiển thị mob đã chọn
FarmSection:NewLabel("Chọn Mob bằng cách click vào nó trong game")

local selectedLabel = FarmSection:NewLabel("Mob đã chọn: Không có")

-- Toggle Auto Farm
FarmSection:NewToggle("Auto Farm Mobs", "Tự động farm quái đã chọn", false, function(state)
    AutoFarm = state
    if AutoFarm then
        AutoFarmFunction()
    end
end)

-- Auto Farm Function
function AutoFarmFunction()
    task.spawn(function()
        while AutoFarm do
            pcall(function()
                local player = game.Players.LocalPlayer
                local character = player.Character
                local mobs = workspace:FindFirstChild("Mobs")

                if mobs and character and character:FindFirstChild("HumanoidRootPart") and SelectedMob then
                    for _, mob in pairs(mobs:GetChildren()) do
                        if mob.Name == SelectedMob and mob:FindFirstChild("HumanoidRootPart") and mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                            -- Teleport tới mob đã chọn
                            character.HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)

                            -- Tấn công mob
                            local args = {[1] = mob}
                            game:GetService("ReplicatedStorage").Remotes.Combat:FireServer(unpack(args))
                            task.wait(0.2)
                        end
                    end
                end
            end)
            task.wait(0.1)
        end
    end)
end

-- Detect click vào mob
local UIS = game:GetService("UserInputService")
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()

mouse.Button1Down:Connect(function()
    local target = mouse.Target
    if target and target.Parent and target.Parent:FindFirstChild("Humanoid") then
        SelectedMob = target.Parent.Name
        selectedLabel:UpdateLabel("Mob đã chọn: " .. SelectedMob)
        Library:Notify("Mob đã chọn!", "Bạn đã chọn: " .. SelectedMob, 3)
    end
end)
